# 3주 차 과제

## 캐러셀 컴포넌트 만들기

### 마크업

여러 컴포넌트 중 제공된 캐러셀 디자인 리소스를 분석해서 개발 코드로 핸드오프(handoff)하는 과제를 선택했다. 구조를 처음부터 시맨틱하게 마크업하려고 하다보니 어디서부터 시작해야 할지 고민이 됐다. 그래서 우선 `<div>` 요소로 시작해서 하나씩 바꿔나가는 방식으로 수정했다. 슬비쌤이랑 배운 건데 자꾸 해보지 않으니까 금방 까먹는다. 앞으로는 마크업도 많이 짜보는 연습을 해야곘다.

### 스타일링

어찌저찌 마크업을 완료하고 스타일링을 시작하는데 마크업을 잘 짜서 그런지 그렇게 어렵지 않았다. 다만, 캐러셀 요소에 포커스 링의 스타일을 주려고 하는데 생각대로 되지 않았다. `overflow: hidden;` 속성 때문인지 포커스 링이 잘려서 `outline-offset` 속성 값으로 `-1px`을 줬다. 그랬더니 포커스 링이 이미지 뒤로 숨어버렸다. `z-index` 속성 값을 수정해 보기도 하고, `position` 속성을 수정해 보기도 했는데 맞는 해결책이 아니었다.

고민하다가 일단 포커스링의 색깔과 굵기 먼저 수정하기로 했다. 그런데 `outline: 1px solid var(--blue-500)`을 하니까 포커스 링이 사라져 버렸다. 하나씩 따로 분리해서 스타일을 적용하니까 굵기 빼고 다 잘 적용되는 것 같다. 포커스 링의 굵기가 문제인 것 같은데 왜 안 되는지는 결국 못 알아냈다. 우선 자바스크립트로 기능 먼저 구현한 후에 해결해 보자.

### 기능 구현

캐러셀 컨텐츠를 `flex box`로 구현했더니 수업 시간에 실습했던 캐러셀처럼 작동하지 않는다. `translate` 속성을 사용하면 위치는 변경되지만 `overflow: hidden;`으로 숨겨진 콘텐츠는 보이지 않는다. 마크업을 실습했을 때처럼 `position: absolute;`로 다 갈아엎고 싶진 않다. 다른 방법을 찾아봐야겠다.

숨겨진 게 안 보인 게 아니라, 캐러셀 컨텐츠를 `ul` 요소로만 묶어서 그게 통으로 이동한 거였다. `ul` 요소를 `div` 요소로 한 번 더 묶어서 이동시키니까 해결됐다.

### 다 해내고 싶었는데...

오늘 1시까지 다 해내고 싶었는데 어제 저녁부터 시작했더니 시간이 모자란다. 다시 돌아와서 1시 넘더라도 어찌됐든 마무리하고 할 수 있는 데까지 해야겠다.

아직 더 구현해야 하는 기능은
- 버튼을 클릭했을 때 `is-selected` 클래스를 지우고 추가하는 것
- 처음과 마지막에 도달하면 버튼을 비활성화하거나 무한으로 돌 수 있도록 하는 것(예제는 무한으로 도는 것 같은데 그건 어떻게 구현해야 할지 고민해 봐야겠다.)
- 키보드로 접근했을 때 뒤에 숨어있는 캐러셀 컨텐츠에 포커싱이 되지 않도록 하는 것
- 포커스 링 굵기가 적용되지 않거나 사라지는 이유 찾기

정도인 것 같다. 아마 마저 하면서 해야 하는 것들이 더 보일 것 같다.

### 해냈다!!!

하루 늦어버렸지만 과제를 해냈다! 오늘 수업 중에 캐러셀 컴포넌트의 인디케이터에 이벤트 위임 방식을 적용하는 실습을 하면서 캐러셀 컴포넌트의 기능이 더 잘 이해됐다. 실습을 진행하면서 과제에서는 어떻게 적용할 수 있을지 같이 고민해봤다.

다음 버튼을 눌렀을 때 캐러셀 콘텐츠가 한 번만 넘어가고 두 번째 누르면 같은 위치로만 이동됐다. 이유를 찾아보니 `.getBoundingClientRect()` 메서드를 사용해서 `x` 값을 받았더니 한 번 이동한 후, 다음 이동해도 같은 `x` 값이 나오기 때문이었다. 그래서 `distance` 값을 직접 계산하기로 했다. 대신 `carouselWrapper`의 넓이는 계산된 값을 받아서 혹시 넓이를 늘리더라도 기능에 문제가 없도록 했다.

포커스 링은 `:focus-within`을 사용해서 해결했다. `a` 요소에서 직접 포커스 링을 스타일링하니까 적용이 잘 안 됐는데, `a` 요소에 `outline: none;`을 적용하고 상위 요소인 `li` 요소에 `:focus-within` 가상 클래스로 스타일을 적용하니 해결됐다. 처음에 `a` 요소에 `outline`을 제거하지 않았더니 이중으로 적용돼서 선이 굵어 보였는데, `a` 요소에서 `outline`을 제거하니까 잘 작용됐다.
